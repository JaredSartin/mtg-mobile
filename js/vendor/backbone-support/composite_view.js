Support.CompositeView=function(e){this.children=_([]),Backbone.View.apply(this,[e])},_.extend(Support.CompositeView.prototype,Backbone.View.prototype,Support.Observer.prototype,{leave:function(){this.trigger("leave"),this.unbind(),this.unbindFromAll(),this.remove(),this._leaveChildren(),this._removeFromParent()},renderChild:function(e){e.render(),this.children.push(e),e.parent=this},renderChildInto:function(e,t){this.renderChild(e),this.$(t).empty().append(e.el)},appendChild:function(e){this.renderChild(e),$(this.el).append(e.el)},appendChildTo:function(e,t){this.renderChild(e),this.$(t).append(e.el)},prependChild:function(e){this.renderChild(e),$(this.el).prepend(e.el)},prependChildTo:function(e,t){this.renderChild(e),$(t).prepend(e.el)},_leaveChildren:function(){this.children.chain().clone().each(function(e){e.leave&&e.leave()})},_removeFromParent:function(){this.parent&&this.parent._removeChild(this)},_removeChild:function(e){var t=this.children.indexOf(e);this.children.splice(t,1)}}),Support.CompositeView.extend=Backbone.View.extend;