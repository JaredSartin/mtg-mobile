(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};namespace("MtgHelper.Game",function(e){return e.Counter=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="counter",n.build=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t),s=typeof i;return s=="object"||s=="function"?i||r:r}(this,arguments,function(){})},n.prototype.initialize=function(){return this.template=JST["views/game/counter"],this.life=20},n.prototype.render=function(){var e,t=this;return e={"app-life-counter":this.life},this.$el.html($(this.template()).expand(e)),this.set_life_bar(),$("html").hasClass("touch")?(this.$(".app-decrement-five").hammer().on("tap",function(){return t.decrement_five()}),this.$(".app-decrement-one").hammer().on("tap",function(){return t.decrement_one()}),this.$(".app-increment-one").hammer().on("tap",function(){return t.increment_one()}),this.$(".app-increment-five").hammer().on("tap",function(){return t.increment_five()})):(this.$(".app-decrement-five").on("click",function(){return t.decrement_five()}),this.$(".app-decrement-one").on("click",function(){return t.decrement_one()}),this.$(".app-increment-one").on("click",function(){return t.increment_one()}),this.$(".app-increment-five").on("click",function(){return t.increment_five()})),this},n.prototype.set_life_bar=function(){var e,t,n,r=this;t=this.life>=20?"life-full":this.life<=0?"life-empty":"life-"+this.life,e=this.$(".app-counter-container").attr("class").split(" "),n=_.find(e,function(e){return e.match(/^life/)}),this.$(".app-counter-container").addClass(t);if(t!==n)return this.$(".app-counter-container").removeClass(n)},n.prototype.decrement_five=function(){return this._change_life(-5)},n.prototype.decrement_one=function(){return this._change_life(-1)},n.prototype.increment_one=function(){return this._change_life(1)},n.prototype.increment_five=function(){return this._change_life(5)},n.prototype._change_life=function(e){return this.life=this.life+e,this.$(".app-life-counter").text(this.life),this.set_life_bar()},n}(Support.CompositeView)})}).call(this);